<section>

  <% if @dwelling %>
    <% if 0 != @dwelling_offset %>
      <p class="text--center">
	<%= dwelling_offset_message(@dwelling_offset) %>
      </p>
    <% end %>

    <table class="table--bordered " style="background-color:#ffffff;">
      <thead>
	<tr>
	  <% FreecenDwelling.dwelling_display_labels.each do |lbl| %>
	  <td>
	    <%= lbl %>
	  </td>
	  <% end %>
	</tr>
      </thead>
      <tbody>
	<tr>
	  <%# @search_record.place.place_name --- moved to models/freecen_dwelling (see "*TODO*") %>
	  <% @dwelling.dwelling_display_values.each do |field_val| %>
	  <td>
	    <%= field_val %>
	  </td>
	  <% end %>
	</tr>
      </tbody>
    </table>
    <div style="height:0px;"></div>
    <table class="table--bordered " style="background-color:#ffffff;">
      <thead>
	<tr>
	  <% FreecenIndividual.individual_display_labels.each do |lbl| %>
	  <td>
	    <%= lbl %>
	  </td>
	  <% end %>
	</tr>
      </thead>
      <tbody>
	<% @dwelling.freecen_individuals.asc(:sequence_in_household).each do |individual| %>
	<tr>
	  <% individual.individual_display_values.each do |field_val| %>
	  <td>
	    <%= field_val %>
	  </td>
	  <% end %>
	</tr>
	<% end %>
      </tbody>
    </table>
    <% end %>



  <% if @annotations && @annotations.length > 0 %>
  <!----- do we need this annotations stuff for freecen? ----->
  <table class="table--bordered ">
    <thead>
      <tr>
        <td colspan="2">
          <h2>Online Transcriptions</h2>
        </td>
      </tr>
    </thead>
    <tbody>
      <% @annotations.each do |annotation| %>
      <% annotation.attributes.keys.each do |field| %>
      <% if annotation[field] %>
      <tr>
        <td><%= field.gsub('_',' ').capitalize %></td>
        <td><%= annotation[field] %></td>
      </tr>
      <% end %>
      <% end %>
      <% transcription = annotation.transcription %>
      <% if transcription %>
      <% transcription.attributes.keys.each do |field| %>
      <% if transcription[field] %>
      <tr>
        <td><%= field.gsub('_',' ').capitalize %></td>
        <td><%= transcription[field] %></td>
      </tr>
      <% end %>
      <% end %>
      <tr>
        <td>Image</td>
        <td>
          <% if transcription.asset.thumbnail_location %>
          <%= link_to(image_tag(transcription.asset.thumbnail_location), transcription.asset.location) %>
          <% else %>
          <%= link_to("Image", transcription.asset.location) %>
          <% end %>
        </td>
      </tr>
      <% end %>
      <% end %>
    </tbody>
  </table>
  <% end%>
  <% unless params[:debug].blank? %>
  <table class="table--bordered ">
    <thead>
      <tr>
        <td colspan="2">
          <h1>Record</h1>
        </td>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Primary names</td>
        <td>
          <% @search_record.primary_names.each do |name| %>
          first_name: <%= name.first_name %><br/>
          last_name: <%= name.last_name %><br/>
          origin: <%= name.origin %><br/>
          <% end %>
        </td>
      </tr>
      <tr>
        <td>Other family names</td>
        <td>
          <% @search_record.inclusive_names.each do |name| %>
          first_name: <%= name.first_name %><br/>
          last_name: <%= name.last_name %><br/>
          origin: <%= name.origin %><br/>
          <% end %>
        </td>
      </tr>
      <% @search_record.ordered_display_fields.each do |field| %>
      <% if @search_record[field] %>
      <tr>
        <td><%= field.gsub('_',' ').capitalize %></td>
        <td><%= @search_record[field] %></td>
      </tr>
      <% end %>
      <% end %>
    </tbody>
  </table>
  <% end %>


</section>

