<table class="table--bordered table--data">
  <thead>
    <tr>
      <th class="t20">ID</th>
      <th class="t20">Subject</th>
      <th class="t10">Sent by</th>
      <th class="t10">Posted</th>
      <th class="t10">Attachment</th>
      <th class="t20">Message begins</th>
      <th class="t10">Reply Message</th>
      <th class="t20">Actions</th>
    </tr>
  </thead>
  <tbody>
  <% @messages.each do |message| %>
    <tr>
      <td><%= message.id %></td>
      <td><%= message.subject %></td>
      <td><%= message.userid %></td>
      <td><%= message.message_time.strftime("%d %b %Y") unless message.message_time.nil?%></td>
      <td><%= attachment(message)%></td>
      <td><%= message.body[0,100] %>&hellip;</td>
      <% unless reply_messages_count(message) == 0 %>
        <td><%= reply_messages_count(message) %></td>
      <% else %>
        <td> No replies</td>
      <% end %>
      <td>
        <%= link_to 'SH', show_waitlist_msg_path(message.id), :class => "btn weight--light  btn--small" %>
        <%#= link_to 'DES', message_path(message.id), :class => "btn weight--light  btn--small", method: :delete, data: { confirm: 'Are you sure you want to delete this message' } unless @user_messages.include?(message.id) %>
        <%= link_to 'Remove', remove_from_useriddetail_waitlist_path(message.id), :class => "btn weight--light  btn--small", method: :delete, data: { confirm: 'Are you sure you want to remove this message from your list?' } if message.source_message_id.blank? %>
        <%= link_to 'Reply', reply_messages_path(message.id),method: :get,:class => "btn weight--light  btn--small" if message.source_message_id.blank? %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>