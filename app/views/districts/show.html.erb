<%= show_page_back_link({district: @district, search_query: @search_query, search_record: @search_record})%>
<%# @district = District.where(DistrictNumber: params['district_number']).first if params['district_number'] %>
<div class="grid">
  <div class="grid__item">
    <h1 class="beta push-half--top flush--bottom">District: <%= "#{@district.district_name_display_format}"%></h1>
    <hr>
    <div style="float: right; width: 45%;">
      <div class="island island--bordered">
        <h2>District information</h2>
        <div class="grid__item one-whole lap-one-whole palm-one-whole hard--left">
          <table class="table--bordered table--data">
            <caption class="accessibility"> Statistics for <%= "#{@district.district_name_display_format} District"%>  </caption>
            <tr>
              <th>Births</th>
              <td colspan="2"><%= BestGuess.where(DistrictNumber: @district.DistrictNumber, RecordTypeId: 1).count %></td>
            </tr>
            <tr>
              <th>Deaths</th>
              <td colspan="2"><%= BestGuess.where(DistrictNumber: @district.DistrictNumber, RecordTypeId: 2).count %></td>
            </tr>
            <tr>
              <th>Marriages</th>
              <td colspan="2"><%= BestGuess.where(DistrictNumber: @district.DistrictNumber, RecordTypeId: 3).count %></td>
            </tr>
            <tr>
              <th rowspan="4">Unique Names</th>
            </tr>
            <tr>
              <td><%= link_to 'View Birth Names', unique_district_names_path(id: @district.DistrictNumber, record_type: "birth" ), method: :get %></td>
              <td>
                <dl>
                  <dt>
                    Forenames Count: <%= @birth_uniq_forename_count%>
                  </dt>
                  <dt>
                    Surnames Count: <%= @birth_uniq_surname_count%>
                  </dt>
                </dl>
              </td>
            </tr>
            <tr>
              <td><%= link_to 'View Marriage Names', unique_district_names_path(id: @district.DistrictNumber, record_type: "marriage" ), method: :get %></td>
              <td>
                <dl>
                  <dt>
                    Forenames Count: <%= @marriage_uniq_forename_count%>
                  </dt>
                  <dt>
                    Surnames Count: <%= @marriage_uniq_surname_count%>
                  </dt>
                </dl>
              </td>
            </tr>
            <tr>
              <td><%= link_to 'View Death Names', unique_district_names_path(id: @district.DistrictNumber, record_type: "death" ), method: :get %></td>
              <td>
                <dl>
                  <dt>
                    Forenames Count: <%= @death_uniq_forename_count%>
                  </dt>
                  <dt>
                    Surnames Count: <%= @death_uniq_surname_count%>
                  </dt>
                </dl>
              </td>
            </tr>
          </table>
          <div>Page map for <%= "#{@district.district_name_display_format}" %></div>
          <div>Births by year for <%= "#{@district.district_name_display_format}" %></div>
          <div>Deaths by year for <%= "#{@district.district_name_display_format}" %></div>
          <div>Marriages by year for <%= "#{@district.district_name_display_format}" %></div>
          <div>Volumes by year for <%= "#{@district.district_name_display_format}" %></div>
          <div>Volumes/year conflicts for <%= "#{@district.district_name_display_format}" %></div>
        </div>
      </div>
    </div>
    <section>
      <div class="grid__item one-half lap-one-half palm-one-whole hard--left">
        <table class="table--bordered table--data">
          <caption class="accessibility"> Information about <%= "#{@district.district_name_display_format} District"%>  </caption>
          <tbody>
            <tr>
              <th rowspan="6">Volume</th>
            </tr>
            <tr>
              <td>Year 1837 to 1851</td>
              <td><%= @district.Volume1837to1851 %></td>
            </tr>
            <tr>
              <td>Year 1852 to 1945</td>
              <td><%= @district.Volume1852to1945 %></td>
            </tr>
            <tr>
              <td>Year 1946 to 1965</td>
              <td><%= @district.Volume1946to1965 %></td>
            </tr>
            <tr>
              <td>Year 1966 to 1973</td>
              <td><%= @district.Volume1966to1973 %></td>
            </tr>
            <tr>
              <td>Year 1974 to 1993_4</td>
              <td><%= @district.Volume1974to1993_4 %></td>
            </tr>
            <tr>
              <th>GRO District Number</th>
              <td>Year 1993-4 to End</td>
              <td><%= @district.Volume1993_4toEnd %></td>
            </tr>
            <tr>
              <th rowspan="<%= @district.DistrictToCounty.count + 1%>">County</th>
            </tr>
            <% @district.DistrictToCounty.each do |d| %>
              <tr>
                <td><%= link_to ChapmanCode::name_from_code(d.County),county_summary_path(county_code: d.County) %></td>
                <td><%= "From #{QuarterDetails.quarter_human(d.StartQN)}" %> <%= QuarterDetails.quarter_year(d.EndQN) > 1993 ? "" : "to #{QuarterDetails.quarter_human(d.EndQN)}" %></td>
              </tr>
            <% end %>
            <tr>
              <th>Alternate names for District</th>
              <td colspan="2"><% @district.DistrictPseudonym.each do |n| %><%= n.DistrictPseudonym + " " %><% end %></td>
            </tr>
              <tr>
                <th>UKBMD Link</th>
                <td colspan="2">
                  <% if @district.district_url_definable? %>
                    There is  more information about <%= @district.district_name_display_format.capitalize %> on the UKBMD website. Please note that during the period this Registration District name was used there could be changes in which places were included within the district. UKBMD  includes information on these:
                    <%= link_to "More information about #{@district.district_name_display_format.capitalize} on UKBMD", "http://www.ukbmd.org.uk/reg/districts/#{@district.ukbmd_url_distict}.html"%><br>
                  <% else %>
                    Not Available
                  <% end %>
                </td>
              </tr>
          </tbody>
        </table>
      </div>  
    </section>
  </div>
</div>
