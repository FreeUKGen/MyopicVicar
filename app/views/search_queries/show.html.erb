<% title "Search Results" %>
<% if flash[:notice] %>
  <div id="notice" style="color:red;"><br>
    <%= flash[:notice] %>  <% flash[:notice] = nil %><br>
  </div>
<% end %>
<% show_contents_link%>
<% if @search_query.present? %>
  <%= render 'nav_header' %>
  <%= render 'display_search_criteria' unless appname_downcase='freebmd'%>
  <% if appname_downcase='freebmd'%>
    <div class="grid search_resu">
      <div class="grid__item one-sixth lap-one-half palm-one-whole">
        <div class='results_block'>
          Results
        </div>
        <div class='result_count'>
          <%= pluralize(@result_count, 'Result', ' Search Results') %>
        </div>
      </div>
      <div class="grid__item five-sixths lap-one-half palm-one-whole">
        <%= render 'display_search_criteria' %>
      </div>
    </div>
  <% end %>
  <section>
    <% if @result_count >= FreeregOptionsConstants::MAXIMUM_NUMBER_OF_RESULTS %>
      <%= render 'too_many_results' %>
    <% else %>
      <% if @result_count == 0 && ( @ucf_results && @ucf_results.size == 0) %>
        <%= render 'no_results' %>
      <% else %>
        <%= render 'show_advertisement' %>
        <% if device_type == :desktop || device_type == :tablet %>
          <div class="container">
            <div class="grid">
              <div id='freereg_sidebar_left_desk' class="grid__item  one-sixth  palm-one-whole">
              </div>
              <div class="" id='results_table'>
                <%= render(:partial => app_specific_partial("desktop"), :locals => {:search_results => @search_results, :inclusive => @search_query.inclusive, :witness =>@search_query.witness, :first_name => @search_query.first_name, :last_name => @search_query.last_name, :ucf_results => false})  %>
              </div>
              <div id='freereg_sidebar_right_desk' class="grid__item  one-sixth  palm-one-whole text--right">
              </div>
            </div>
          </div>
        <% else %>
          <%= render(:partial => app_specific_partial("mobile"), :locals => {:search_results => @search_results, :ucf_results => false}) %>
        <% end %>
        <% if ucf_wildcards_enabled? && @ucf_results && @ucf_results.size >= 1 %>
          <%= render 'display_ucf_results' %>
        <% end %>
      <% end%>
      <% if @result_count > 10 && @result_count < FreeregOptionsConstants::MAXIMUM_NUMBER_OF_RESULTS %>
        <br>
        <%= render 'nav_header' %>
        <a href="#" class="btn  btn--small">Go to top</a>
      <% end %>
      <div class="grid">
        <div class="grid__item one-third lap-one-half palm-one-whole">
          <% if @result_count > 0 && @result_count < FreeregOptionsConstants::MAXIMUM_NUMBER_OF_RESULTS %><center><br><%= FeedbackIconHelper::FEEDBACK_ICON.html_safe %></center>
<p class="push-half--bottom">FreeBMD2 is a work in progress; we want your feedback on all aspects so that we can make it better.</p>
          <% end %>
        </div>
        <div class="grid__item one-third lap-one-half palm-one-whole">
          <% if @result_count > 0 && @result_count < FreeregOptionsConstants::MAXIMUM_NUMBER_OF_RESULTS %>
            <%= render 'please_donate' %>
          <% end %>
        </div>
        <div class="grid__item one-third lap-one-half palm-one-whole">
          <div class="read-length push--bottom" style="margin-left: auto; margin-right: auto;">
          <br>
          <% if @result_count > 0 && @result_count < FreeregOptionsConstants::MAXIMUM_NUMBER_OF_RESULTS %>
            <center><br><%= VolunteerIconHelper::VOLUNTEER_ICON.html_safe %></center>
            <p class="push-half--bottom">Have a spare 30 minutes a week? Give back by volunteering!</p>

          <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </section>
<% else %>
  <%= render 'no_results' %>
<% end %>
<script type="text/javascript">
  var result = window.canRunAds;
  if(result === true) {
    $("#results_table").addClass("grid__item  two-thirds  palm-one-whole");
  } else {
    $("#results_table").addClass("");
  }
</script>


