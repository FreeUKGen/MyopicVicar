<h2 style="text-align: center">Database Records for District of <%= @district_description %> in <%= @county_description %> as of  <%= @interval_end.strftime('%d %b %Y') %> </h2>
<div  style="text-align: center">
  <%= link_to 'Back to Totals for All Counties' , freecen2_contents_path, method: :get , :class => "btn btn--small" %>
  <%= choose_another_county_link %>
  <%= choose_another_district_link(@county_description) %>
  <br>
  <br>
</div>
<div>
  <fieldset class="inputs">
    <li class="grid__item one-third palm-one-whole" >
      <% if @all_places.count > 0 %>
        <h3 style="text-align: center"> You may choose a specific Place:</h3>
        <%= simple_form_for @place do |f| %>
          <%= f.input :place_name, :as=>:select, label: false, :collection=>@all_places, :include_blank=>"Select Place",  :input_html => {  :class => " simple_form_bgcolour simple_form_position overide_selection_field_width", :'onchange'=>@location},:hint => '(click the button above to choose from the list of all places in the district where Pieces exist in the database)' %>
        <% end %>
      </li>
      <li class="grid__item two-thirds palm-one-whole" >
        <h3 style="text-align: center">Totals for All Places in <%= @district_description %></h3>
      <% else %>
        <h3 style="text-align: center"> There are no Places for this District</h3>
      </li>
      <li class="grid__item two-thirds palm-one-whole" >
        <h3 style="text-align: center">Totals for District <%= @district_description %></h3>
      <% end %>
      <div class='scrollable'>
        <table  class="table--bordered table--data table--striped my-width " >
          <thead >
            <tr>
              <th class='sticky-header'>Year</th>
              <th class='sticky-header'>Pieces Online</th>
              <th class='sticky-header'>Total Pieces</th>
              <th class='sticky-header'>% Online</th>
              <th class='sticky-header'>New Pieces Online</th>
            </tr>
          </thead>
          <tbody>
            <% Freecen::CENSUS_YEARS_ARRAY.each do |census| %>
              <tr>
                <td><%= census %></td>
                <td><%= @freecen2_contents.records[@chapman_code][@key_district][census][:pieces_online] %></td>
                <td><%= @freecen2_contents.records[@chapman_code][@key_district][census][:pieces] %></td>
                <%= contents_show_percentage(@freecen2_contents.records[@chapman_code][@key_district][census][:pieces_online], @freecen2_contents.records[@chapman_code][@key_district][census][:pieces]) %>
                <td><%= @freecen2_contents.records[@chapman_code][@key_district][census][:added_pieces_online] %></td>
              </tr>
            <% end%>
            <tr>
              <td>Total</td>
              <td><%= @freecen2_contents.records[@chapman_code][@key_district][:total][:pieces_online] %></td>
              <td><%= @freecen2_contents.records[@chapman_code][@key_district][:total][:pieces] %></td>
              <%= contents_show_percentage(@freecen2_contents.records[@chapman_code][@key_district][:total][:pieces_online], @freecen2_contents.records[@chapman_code][@key_district][:total][:pieces]) %>
              <td><%= @freecen2_contents.records[@chapman_code][@key_district][:total][:added_pieces_online] %></td>
            </tr>
          </tbody>
        </table>
      </div>
    </li>
  </fieldset>
</div>
<script>
  function replace_chars(str) {
    return str.replace('&', '%26').replace('+','%2B')
  }
</script>