<h1 class="beta text--center">Database Records for <%= @place_description %> in <%= @county_description %> as of <%= @interval_end.strftime('%d')%>&nbsp;<%= @interval_end.strftime('%b')%>&nbsp;<%= @interval_end.strftime('%Y')%></h1>
<h2 class="accessibility">Database Records for <%= @place_description %> in <%= @county_description %></h2>
<nav aria-label="Records options">
  <ul class="nav nav--banner">
    <li><a data-method="get" href="/freecen2_contents?locale=en">Choose Another County</a> | </li>
    <% if @place_description == 'all'%>
      <li><a data-method="get" href="/freecen2_contents/county_index?local=en&amp;county_description=<%=@county_description%>">Back to Records for <%= @county_description %></a> | </li>
    <% else %>
      <li><a data-method="get" href="/freecen2_contents/county_index?local=en&amp;county_description=<%=@county_description%>">Choose another Place in <%= @county_description %></a> | </li>
    <% end %>
    <%= locate_place_link(@place_id,'N') %>
  </ul>
</nav>
<h2 class="gamma text--center">Totals for <%= @place_description %> in <%= @county_description %></h2>
<div>
  <p><small class="additional read-length">You can use the Detail links to view a list of Pieces (including Civil Parish names) and a list of Names currently in the Database, where available.<br>
      Note: a * next to the number of Pieces Online means that only part of one or more pieces is currently online.</small></p>
</div>
<div class='scrollable'>
  <table  class="table--bordered table--data table--striped my-width " >
    <caption class="accessibility">Database totals for <% @place_description %> by census year</caption>
    <thead>
      <tr>
        <th scope="col" class='sticky-header'>Year</th>
        <th scope="col" class='sticky-header'>Records Online</th>
        <th scope="col" class='sticky-header'>Pieces Online</th>
        <th scope="col" class='sticky-header'>Total Pieces</th>
        <th scope="col" class='sticky-header'>% Online</th>
        <th scope="col" class='sticky-header'>New Pieces<br>
          Online</th>
        <% if @freecen2_contents.records[@chapman_code][@key_place][:total][:pieces_online] > 0 %>
          <th scope="col" colspan = "2" class='sticky-header t20'>Detail Links</th>
        <% else %>
          <th scope="col" class='sticky-header '>Actions</th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% Freecen::CENSUS_YEARS_ARRAY.each do |census| %>
        <tr>
          <th scope="row"><%= census %></th>
          <td><%= number_with_delimiter(@freecen2_contents.records[@chapman_code][@key_place][census][:records_online], :delimiter => ',') %></td>
          <%= contents_check_for_partials(@freecen2_contents.records[@chapman_code][@key_place][census][:piece_ids], @freecen2_contents.records[@chapman_code][@key_place][census][:pieces_online]) %>
          <td><%= number_with_delimiter(@freecen2_contents.records[@chapman_code][@key_place][census][:pieces], :delimiter => ',') %></td>
          <%= contents_show_percentage(@freecen2_contents.records[@chapman_code][@key_place][census][:pieces_online], @freecen2_contents.records[@chapman_code][@key_place][census][:pieces]) %>
          <td><%= number_with_delimiter(@freecen2_contents.records[@chapman_code][@key_place][census][:added_pieces_online], :delimiter => ',') %></td>
          <% if @freecen2_contents.records[@chapman_code][@key_place][census][:pieces_online] > 0 || @has_names[census] == true %>
            <td> <a data-method="get"data-method="get" href="/freecen2_contents/display_pieces_by_status?locale=en&amp;county_description=<%=@county_description%>&amp;place_description=<%=@place_description%>&amp;place_id=<%=@place_id%>&amp;census_year=<%=census%>&amp;order=status">Pieces <span class="accessibility">in <%= census %></span></a></td>
            <% if @freecen2_contents.records[@chapman_code][@key_place][census][:records_online] > 0 %>
              <td> <a data-method="get"data-method="get" href="/freecen2_contents/place_names?locale=en&amp;county_description=<%=@county_description%>&amp;place_description=<%=@place_description%>&amp;place_id=<%@place_id%>&amp;census_year=<%=census%>">Names <span class="accessibility">in <%= census %></span></a></td>
            <% end %>
          <% else %>
            <% if @freecen2_contents.records[@chapman_code][@key_place][census][:pieces] > 0 %>
              <td> <a data-method="get"data-method="get" href="/freecen2_contents/display_pieces_by_status?locale=en&amp;county_description=<%=@county_description%>&amp;place_description=<%=@place_description%>&amp;place_id=<%=@place_id%>&amp;census_year=<%=census%>&amp;order=status">Pieces <span class="accessibility">in <%= census %></span></a></td>
              <% if @freecen2_contents.records[@chapman_code][@key_place][:total][:pieces_online] > 0 || @has_some_names == true %>
                <td> N/A </td>
              <% end %>
            <% else %>
              <td> N/A </td>
              <% if @freecen2_contents.records[@chapman_code][@key_place][:total][:pieces_online] > 0 || @has_some_names == true %>
                <td> N/A </td>
              <% end %>
            <% end %>
          <% end %>
        </tr>
      <% end %>
    </tbody>
    <tfoot>
      <tr>
        <th scope="row">Total</th>
        <td><%= number_with_delimiter(@freecen2_contents.records[@chapman_code][@key_place][:total][:records_online], :delimiter => ',') %></td>
        <%= contents_check_for_partials(@freecen2_contents.records[@chapman_code][@key_place][:total][:piece_ids], @freecen2_contents.records[@chapman_code][@key_place][:total][:pieces_online]) %>
        <td><%= number_with_delimiter(@freecen2_contents.records[@chapman_code][@key_place][:total][:pieces], :delimiter => ',') %></td>
        <%= contents_show_percentage(@freecen2_contents.records[@chapman_code][@key_place][:total][:pieces_online], @freecen2_contents.records[@chapman_code][@key_place][:total][:pieces]) %>
        <td><%= number_with_delimiter(@freecen2_contents.records[@chapman_code][@key_place][:total][:added_pieces_online], :delimiter => ',') %></td>
        <td> <a data-method="get"data-method="get" href="/freecen2_contents/display_pieces_by_status?locale=en&amp;county_description=<%=@county_description%>&amp;place_description=<%=@place_description%>&amp;place_id=<%=@place_id%>&amp;census_year=all&amp;order=status"><span class="accessibility">Total </span>Pieces</a></td>
        <% if @freecen2_contents.records[@chapman_code][@key_place][:total][:pieces_online] > 0 || @has_some_names == true %>
          <td> N/A </td>
        <% end %>
      </tr>
    </tfoot>
  </table>
</div>
